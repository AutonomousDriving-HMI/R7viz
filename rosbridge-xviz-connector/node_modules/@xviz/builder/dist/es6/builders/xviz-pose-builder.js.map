{"version":3,"sources":["../../../src/builders/xviz-pose-builder.js"],"names":["XVIZBaseBuilder","CATEGORY","XVIZPoseBuilder","constructor","props","category","pose","_poses","mapOrigin","longitude","latitude","altitude","_mapOrigin","position","x","y","z","_position","orientation","roll","pitch","yaw","_orientation","timestamp","_timestamp","_flush","data","_streamId","reset","getData","poses"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,eAAP,MAA4B,qBAA5B;AACA,SAAQC,QAAR,QAAuB,YAAvB;AAEA,eAAe,MAAMC,eAAN,SAA8BF,eAA9B,CAA8C;AAC3DG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,4BACKA,KADL;AAEEC,MAAAA,QAAQ,EAAEJ,QAAQ,CAACK;AAFrB;AAKA,SAAKC,MAAL,GAAc,IAAd;AACD;;AAEDC,EAAAA,SAAS,CAACC,SAAD,EAAYC,QAAZ,EAAsBC,QAAtB,EAAgC;AACvC,SAAKC,UAAL,GAAkB;AAACH,MAAAA,SAAD;AAAYC,MAAAA,QAAZ;AAAsBC,MAAAA;AAAtB,KAAlB;AACA,WAAO,IAAP;AACD;;AAEDE,EAAAA,QAAQ,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAU;AAChB,SAAKC,SAAL,GAAiB,CAACH,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAjB;AACA,WAAO,IAAP;AACD;;AAEDE,EAAAA,WAAW,CAACC,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAmB;AAC5B,SAAKC,YAAL,GAAoB,CAACH,IAAD,EAAOC,KAAP,EAAcC,GAAd,CAApB;AACA,WAAO,IAAP;AACD;;AAEDE,EAAAA,SAAS,CAACA,SAAD,EAAY;AACnB,SAAKC,UAAL,GAAkBD,SAAlB;AACA,WAAO,IAAP;AACD;;AAEDE,EAAAA,MAAM,GAAG;AACP,QAAI,CAAC,KAAKlB,MAAV,EAAkB;AAChB,WAAKA,MAAL,GAAc,EAAd;AACD;;AAED,UAAMmB,IAAI,GAAG,EAAb;;AACA,QAAI,KAAKF,UAAT,EAAqB;AACnBE,MAAAA,IAAI,CAACH,SAAL,GAAiB,KAAKC,UAAtB;AACD;;AAED,QAAI,KAAKZ,UAAT,EAAqB;AACnBc,MAAAA,IAAI,CAAClB,SAAL,GAAiB,KAAKI,UAAtB;AACD;;AAED,QAAI,KAAKK,SAAT,EAAoB;AAClBS,MAAAA,IAAI,CAACb,QAAL,GAAgB,KAAKI,SAArB;AACD;;AAED,QAAI,KAAKK,YAAT,EAAuB;AACrBI,MAAAA,IAAI,CAACR,WAAL,GAAmB,KAAKI,YAAxB;AACD;;AAED,SAAKf,MAAL,CAAY,KAAKoB,SAAjB,IAA8BD,IAA9B;AACD;;AAEDE,EAAAA,KAAK,GAAG;AACN,UAAMA,KAAN;AAEA,SAAKJ,UAAL,GAAkB,IAAlB;AACA,SAAKZ,UAAL,GAAkB,IAAlB;AACA,SAAKK,SAAL,GAAiB,IAAjB;AACA,SAAKK,YAAL,GAAoB,IAApB;AACD;;AAEDO,EAAAA,OAAO,GAAG;AACR,QAAI,KAAKF,SAAT,EAAoB;AAClB,WAAKF,MAAL;AACD;;AAED,WAAO;AACLK,MAAAA,KAAK,EAAE,KAAKvB;AADP,KAAP;AAGD;;AAxE0D","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport XVIZBaseBuilder from './xviz-base-builder';\nimport {CATEGORY} from './constant';\n\nexport default class XVIZPoseBuilder extends XVIZBaseBuilder {\n  constructor(props) {\n    super({\n      ...props,\n      category: CATEGORY.pose\n    });\n\n    this._poses = null;\n  }\n\n  mapOrigin(longitude, latitude, altitude) {\n    this._mapOrigin = {longitude, latitude, altitude};\n    return this;\n  }\n\n  position(x, y, z) {\n    this._position = [x, y, z];\n    return this;\n  }\n\n  orientation(roll, pitch, yaw) {\n    this._orientation = [roll, pitch, yaw];\n    return this;\n  }\n\n  timestamp(timestamp) {\n    this._timestamp = timestamp;\n    return this;\n  }\n\n  _flush() {\n    if (!this._poses) {\n      this._poses = {};\n    }\n\n    const data = {};\n    if (this._timestamp) {\n      data.timestamp = this._timestamp;\n    }\n\n    if (this._mapOrigin) {\n      data.mapOrigin = this._mapOrigin;\n    }\n\n    if (this._position) {\n      data.position = this._position;\n    }\n\n    if (this._orientation) {\n      data.orientation = this._orientation;\n    }\n\n    this._poses[this._streamId] = data;\n  }\n\n  reset() {\n    super.reset();\n\n    this._timestamp = null;\n    this._mapOrigin = null;\n    this._position = null;\n    this._orientation = null;\n  }\n\n  getData() {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    return {\n      poses: this._poses\n    };\n  }\n}\n"],"file":"xviz-pose-builder.js"}