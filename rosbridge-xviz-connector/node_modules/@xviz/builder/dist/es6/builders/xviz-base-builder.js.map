{"version":3,"sources":["../../../src/builders/xviz-base-builder.js"],"names":["XVIZBaseBuilder","constructor","validator","category","metadata","_streamId","_category","_metadata","_validator","stream","streamId","_flush","getStreamId","getCategory","getMetadata","Error","_reset","_validate","hasProp","matchMetadata","validateWarn","msg","warn","validateError","error","validatePropSetOnce","prop","propSetOnce"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,eAAe,MAAMA,eAAN,CAAsB;AACnCC,EAAAA,WAAW,OAAkC;AAAA,QAAhCC,SAAgC,QAAhCA,SAAgC;AAAA,QAArBC,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC3C,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,SAAL,GAAiBH,QAAjB;AACA,SAAKI,SAAL,GAAiBH,QAAjB;AAEA,SAAKI,UAAL,GAAkBN,SAAlB;AACD;;AAEDO,EAAAA,MAAM,CAACC,QAAD,EAAW;AACf,QAAI,KAAKL,SAAT,EAAoB;AAClB,WAAKM,MAAL;AACD;;AAED,SAAKN,SAAL,GAAiBK,QAAjB;AACA,WAAO,IAAP;AACD;;AAEDE,EAAAA,WAAW,GAAG;AACZ,WAAO,KAAKP,SAAZ;AACD;;AAEDQ,EAAAA,WAAW,GAAG;AACZ,WAAO,KAAKP,SAAZ;AACD;;AAEDQ,EAAAA,WAAW,GAAG;AACZ,WAAO,KAAKP,SAAZ;AACD;;AAEDI,EAAAA,MAAM,GAAG;AACP,UAAM,IAAII,KAAJ,CAAU,qDAAV,CAAN;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,SAAKV,SAAL,GAAiB,IAAjB;AACD;;AAEDW,EAAAA,SAAS,GAAG;AACV,SAAKT,UAAL,CAAgBU,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;AACA,SAAKV,UAAL,CAAgBU,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;AACA,SAAKV,UAAL,CAAgBW,aAAhB,CAA8B,IAA9B;AACD;;AAEDC,EAAAA,YAAY,CAACC,GAAD,EAAM;AAChB,SAAKb,UAAL,CAAgBc,IAAhB,CAAqBD,GAArB;AACD;;AAEDE,EAAAA,aAAa,CAACF,GAAD,EAAM;AACjB,SAAKb,UAAL,CAAgBgB,KAAhB,CAAsBH,GAAtB;AACD;;AAEDI,EAAAA,mBAAmB,CAACC,IAAD,EAAO;AACxB,SAAKlB,UAAL,CAAgBmB,WAAhB,CAA4B,IAA5B,EAAkCD,IAAlC;AACD;;AAtDkC","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* XVIZBaseBuilder provides validation and category information\n * shared across all builders.\n */\nexport default class XVIZBaseBuilder {\n  constructor({validator, category, metadata}) {\n    this._streamId = null;\n    this._category = category;\n    this._metadata = metadata;\n\n    this._validator = validator;\n  }\n\n  stream(streamId) {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    this._streamId = streamId;\n    return this;\n  }\n\n  getStreamId() {\n    return this._streamId;\n  }\n\n  getCategory() {\n    return this._category;\n  }\n\n  getMetadata() {\n    return this._metadata;\n  }\n\n  _flush() {\n    throw new Error('Derived class must implement the \"_flush()\" method.');\n  }\n\n  _reset() {\n    this._category = null;\n  }\n\n  _validate() {\n    this._validator.hasProp(this, '_streamId');\n    this._validator.hasProp(this, '_category');\n    this._validator.matchMetadata(this);\n  }\n\n  validateWarn(msg) {\n    this._validator.warn(msg);\n  }\n\n  validateError(msg) {\n    this._validator.error(msg);\n  }\n\n  validatePropSetOnce(prop) {\n    this._validator.propSetOnce(this, prop);\n  }\n}\n"],"file":"xviz-base-builder.js"}