{"version":3,"sources":["../../../../src/shared/slider/index.js"],"names":["React","PureComponent","PropTypes","styled","withTheme","evaluateStyle","Draggable","clamp","snap","x","min","max","step","Math","round","SliderWrapper","div","props","theme","__reset__","outline","color","isEnabled","textColorPrimary","textColorDisabled","cursor","pointerEvents","paddingTop","knobSize","paddingBottom","userStyle","SliderTrack","position","width","background","controlColorPrimary","controlColorDisabled","height","SliderTrackFill","transitionProperty","transitionDuration","isDragging","transitionTimingFunction","controlColorActive","SliderKnob","borderStyle","borderWidth","borderColor","isHovered","controlColorHovered","hasFocus","boxSizing","borderRadius","margin","top","Slider","hasDragged","offsetX","pos","value","onChange","setState","evt","delta","keyCode","newValue","_track","clientWidth","_updateValue","state","render","children","className","style","tolerance","controlSize","ratio","styleProps","isActive","wrapper","_onMouseEnter","_onMouseLeave","_onFocus","_onBlur","_onKeyDown","_onDragStart","_onDrag","_onDragEnd","track","ref","trackFill","knob","left","number","isRequired","func","string","object","label","tooltip","badge","element","bool"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../theme';\n\nimport Draggable from '../draggable';\nimport {clamp} from '../../utils/math';\n\nfunction snap(x, min, max, step) {\n  if (step > 0) {\n    x = Math.round((x - min) / step) * step + min;\n  }\n  return clamp(x, min, max);\n}\n\nconst SliderWrapper = styled.div(props => ({\n  ...props.theme.__reset__,\n  outline: 'none',\n  color: props.isEnabled ? props.theme.textColorPrimary : props.theme.textColorDisabled,\n  cursor: 'pointer',\n  pointerEvents: props.isEnabled ? 'all' : 'none',\n  paddingTop: props.knobSize / 2,\n  paddingBottom: props.knobSize / 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderTrack = styled.div(props => ({\n  position: 'relative',\n  width: '100%',\n  background: props.isEnabled ? props.theme.controlColorPrimary : props.theme.controlColorDisabled,\n  height: 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderTrackFill = styled.div(props => ({\n  position: 'absolute',\n  transitionProperty: 'width',\n  transitionDuration: props.isDragging ? '0s' : props.theme.transitionDuration,\n  transitionTimingFunction: props.theme.transitionTimingFunction,\n  height: '100%',\n  background: props.isEnabled ? props.theme.controlColorActive : props.theme.controlColorDisabled,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderKnob = styled.div(props => ({\n  position: 'absolute',\n  borderStyle: 'solid',\n  borderWidth: 2,\n  borderColor: props.isEnabled\n    ? props.isHovered\n      ? props.theme.controlColorHovered\n      : props.hasFocus\n      ? props.theme.controlColorActive\n      : props.theme.controlColorPrimary\n    : props.theme.controlColorDisabled,\n  background: props.theme.background,\n  boxSizing: 'border-box',\n  width: props.knobSize,\n  height: props.knobSize,\n  borderRadius: '50%',\n  margin: -props.knobSize / 2,\n  top: '50%',\n  transitionProperty: 'left',\n  transitionDuration: props.isDragging ? '0s' : props.theme.transitionDuration,\n\n  ...evaluateStyle(props.userStyle, props)\n}));\n\n/*\n * @class\n */\nclass Slider extends PureComponent {\n  static propTypes = {\n    value: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    onChange: PropTypes.func,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    step: PropTypes.number,\n    label: PropTypes.string,\n    tooltip: PropTypes.string,\n    badge: PropTypes.element,\n    isEnabled: PropTypes.bool\n  };\n\n  static defaultProps = {\n    className: '',\n    style: {},\n    step: 0,\n    isEnabled: true,\n    onChange: () => {}\n  };\n\n  state = {\n    width: 1,\n    isHovered: false,\n    hasFocus: false,\n    isDragging: false,\n    hasDragged: false\n  };\n\n  _updateValue = (offsetX, width) => {\n    const {min, max, step} = this.props;\n    const pos = clamp(offsetX / width, 0, 1);\n    const value = snap(min + (max - min) * pos, min, max, step);\n\n    this.props.onChange(value);\n  };\n\n  _onMouseEnter = () => this.setState({isHovered: true});\n  _onMouseLeave = () => this.setState({isHovered: false});\n  _onFocus = () => this.setState({hasFocus: true});\n  _onBlur = () => this.setState({hasFocus: false});\n\n  _onKeyDown = evt => {\n    let delta;\n    switch (evt.keyCode) {\n      case 37: // left\n        delta = -1;\n        break;\n      case 39: // right\n        delta = 1;\n        break;\n      default:\n        return;\n    }\n    const {value, min, max} = this.props;\n    const step = this.props.step || (max - min) / 20;\n    const newValue = clamp(value + step * delta, min, max);\n    if (newValue !== value) {\n      this.props.onChange(newValue);\n    }\n  };\n\n  _onDragStart = evt => {\n    const width = this._track.clientWidth;\n    this.setState({width});\n    this._updateValue(evt.offsetX, width);\n    this.setState({isDragging: true});\n  };\n\n  _onDrag = evt => {\n    this._updateValue(evt.offsetX, this.state.width);\n    this.setState({hasDragged: evt.hasDragged});\n  };\n\n  _onDragEnd = evt => {\n    this.setState({isDragging: false, hasDragged: false});\n  };\n\n  render() {\n    const {value, min, max, step, isEnabled, children, className, style, theme} = this.props;\n    const {isHovered, isDragging, hasFocus, hasDragged} = this.state;\n\n    const {tolerance = 0, knobSize = theme.controlSize} = style;\n    const ratio = (snap(value, min, max, step) - min) / (max - min);\n\n    const styleProps = {\n      theme,\n      knobSize,\n      isEnabled,\n      isHovered,\n      hasFocus,\n      isActive: isDragging,\n      isDragging: hasDragged\n    };\n    return (\n      <SliderWrapper\n        {...styleProps}\n        userStyle={style.wrapper}\n        className={className}\n        tabIndex={isEnabled ? 0 : -1}\n        onMouseEnter={this._onMouseEnter}\n        onMouseLeave={this._onMouseLeave}\n        onFocus={this._onFocus}\n        onBlur={this._onBlur}\n        onKeyDown={this._onKeyDown}\n      >\n        <Draggable\n          tolerance={knobSize / 2 + tolerance}\n          onDragStart={this._onDragStart}\n          onDrag={this._onDrag}\n          onDragEnd={this._onDragEnd}\n        >\n          <SliderTrack\n            userStyle={style.track}\n            {...styleProps}\n            ref={ref => {\n              this._track = ref;\n            }}\n          >\n            {children}\n            <SliderTrackFill\n              {...styleProps}\n              userStyle={style.trackFill}\n              style={{width: `${ratio * 100}%`}}\n            />\n            <SliderKnob {...styleProps} userStyle={style.knob} style={{left: `${ratio * 100}%`}} />\n          </SliderTrack>\n        </Draggable>\n      </SliderWrapper>\n    );\n  }\n}\n\nexport default withTheme(Slider);\n"],"file":"index.js"}