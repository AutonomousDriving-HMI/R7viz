{"version":3,"sources":["../../../../src/shared/slider/index.js"],"names":["snap","x","min","max","step","Math","round","SliderWrapper","styled","div","props","theme","__reset__","outline","color","isEnabled","textColorPrimary","textColorDisabled","cursor","pointerEvents","paddingTop","knobSize","paddingBottom","userStyle","SliderTrack","position","width","background","controlColorPrimary","controlColorDisabled","height","SliderTrackFill","transitionProperty","transitionDuration","isDragging","transitionTimingFunction","controlColorActive","SliderKnob","borderStyle","borderWidth","borderColor","isHovered","controlColorHovered","hasFocus","boxSizing","borderRadius","margin","top","Slider","hasDragged","offsetX","pos","value","onChange","setState","evt","delta","keyCode","newValue","_track","clientWidth","_updateValue","state","children","className","style","tolerance","controlSize","ratio","styleProps","isActive","wrapper","_onMouseEnter","_onMouseLeave","_onFocus","_onBlur","_onKeyDown","_onDragStart","_onDrag","_onDragEnd","track","ref","trackFill","knob","left","PureComponent","PropTypes","number","isRequired","func","string","object","label","tooltip","badge","element","bool"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nimport styled from '@emotion/styled';\nimport {withTheme, evaluateStyle} from '../theme';\n\nimport Draggable from '../draggable';\nimport {clamp} from '../../utils/math';\n\nfunction snap(x, min, max, step) {\n  if (step > 0) {\n    x = Math.round((x - min) / step) * step + min;\n  }\n  return clamp(x, min, max);\n}\n\nconst SliderWrapper = styled.div(props => ({\n  ...props.theme.__reset__,\n  outline: 'none',\n  color: props.isEnabled ? props.theme.textColorPrimary : props.theme.textColorDisabled,\n  cursor: 'pointer',\n  pointerEvents: props.isEnabled ? 'all' : 'none',\n  paddingTop: props.knobSize / 2,\n  paddingBottom: props.knobSize / 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderTrack = styled.div(props => ({\n  position: 'relative',\n  width: '100%',\n  background: props.isEnabled ? props.theme.controlColorPrimary : props.theme.controlColorDisabled,\n  height: 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderTrackFill = styled.div(props => ({\n  position: 'absolute',\n  transitionProperty: 'width',\n  transitionDuration: props.isDragging ? '0s' : props.theme.transitionDuration,\n  transitionTimingFunction: props.theme.transitionTimingFunction,\n  height: '100%',\n  background: props.isEnabled ? props.theme.controlColorActive : props.theme.controlColorDisabled,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst SliderKnob = styled.div(props => ({\n  position: 'absolute',\n  borderStyle: 'solid',\n  borderWidth: 2,\n  borderColor: props.isEnabled\n    ? props.isHovered\n      ? props.theme.controlColorHovered\n      : props.hasFocus\n      ? props.theme.controlColorActive\n      : props.theme.controlColorPrimary\n    : props.theme.controlColorDisabled,\n  background: props.theme.background,\n  boxSizing: 'border-box',\n  width: props.knobSize,\n  height: props.knobSize,\n  borderRadius: '50%',\n  margin: -props.knobSize / 2,\n  top: '50%',\n  transitionProperty: 'left',\n  transitionDuration: props.isDragging ? '0s' : props.theme.transitionDuration,\n\n  ...evaluateStyle(props.userStyle, props)\n}));\n\n/*\n * @class\n */\nclass Slider extends PureComponent {\n  static propTypes = {\n    value: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    onChange: PropTypes.func,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    step: PropTypes.number,\n    label: PropTypes.string,\n    tooltip: PropTypes.string,\n    badge: PropTypes.element,\n    isEnabled: PropTypes.bool\n  };\n\n  static defaultProps = {\n    className: '',\n    style: {},\n    step: 0,\n    isEnabled: true,\n    onChange: () => {}\n  };\n\n  state = {\n    width: 1,\n    isHovered: false,\n    hasFocus: false,\n    isDragging: false,\n    hasDragged: false\n  };\n\n  _updateValue = (offsetX, width) => {\n    const {min, max, step} = this.props;\n    const pos = clamp(offsetX / width, 0, 1);\n    const value = snap(min + (max - min) * pos, min, max, step);\n\n    this.props.onChange(value);\n  };\n\n  _onMouseEnter = () => this.setState({isHovered: true});\n  _onMouseLeave = () => this.setState({isHovered: false});\n  _onFocus = () => this.setState({hasFocus: true});\n  _onBlur = () => this.setState({hasFocus: false});\n\n  _onKeyDown = evt => {\n    let delta;\n    switch (evt.keyCode) {\n      case 37: // left\n        delta = -1;\n        break;\n      case 39: // right\n        delta = 1;\n        break;\n      default:\n        return;\n    }\n    const {value, min, max} = this.props;\n    const step = this.props.step || (max - min) / 20;\n    const newValue = clamp(value + step * delta, min, max);\n    if (newValue !== value) {\n      this.props.onChange(newValue);\n    }\n  };\n\n  _onDragStart = evt => {\n    const width = this._track.clientWidth;\n    this.setState({width});\n    this._updateValue(evt.offsetX, width);\n    this.setState({isDragging: true});\n  };\n\n  _onDrag = evt => {\n    this._updateValue(evt.offsetX, this.state.width);\n    this.setState({hasDragged: evt.hasDragged});\n  };\n\n  _onDragEnd = evt => {\n    this.setState({isDragging: false, hasDragged: false});\n  };\n\n  render() {\n    const {value, min, max, step, isEnabled, children, className, style, theme} = this.props;\n    const {isHovered, isDragging, hasFocus, hasDragged} = this.state;\n\n    const {tolerance = 0, knobSize = theme.controlSize} = style;\n    const ratio = (snap(value, min, max, step) - min) / (max - min);\n\n    const styleProps = {\n      theme,\n      knobSize,\n      isEnabled,\n      isHovered,\n      hasFocus,\n      isActive: isDragging,\n      isDragging: hasDragged\n    };\n    return (\n      <SliderWrapper\n        {...styleProps}\n        userStyle={style.wrapper}\n        className={className}\n        tabIndex={isEnabled ? 0 : -1}\n        onMouseEnter={this._onMouseEnter}\n        onMouseLeave={this._onMouseLeave}\n        onFocus={this._onFocus}\n        onBlur={this._onBlur}\n        onKeyDown={this._onKeyDown}\n      >\n        <Draggable\n          tolerance={knobSize / 2 + tolerance}\n          onDragStart={this._onDragStart}\n          onDrag={this._onDrag}\n          onDragEnd={this._onDragEnd}\n        >\n          <SliderTrack\n            userStyle={style.track}\n            {...styleProps}\n            ref={ref => {\n              this._track = ref;\n            }}\n          >\n            {children}\n            <SliderTrackFill\n              {...styleProps}\n              userStyle={style.trackFill}\n              style={{width: `${ratio * 100}%`}}\n            />\n            <SliderKnob {...styleProps} userStyle={style.knob} style={{left: `${ratio * 100}%`}} />\n          </SliderTrack>\n        </Draggable>\n      </SliderWrapper>\n    );\n  }\n}\n\nexport default withTheme(Slider);\n"],"file":"index.js"}