{"version":3,"sources":["../../../src/metric-card/chart.js"],"names":["React","PureComponent","PropTypes","AutoSizer","XYPlot","AreaSeries","LineSeries","MarkSeries","HorizontalGridLines","VerticalGridLines","XAxis","YAxis","Crosshair","scaleLinear","withTheme","ChartContainer","CrosshairItemTitle","CrosshairItemLegend","CrosshairItemValue","noop","DEFAULT_MARGIN","left","right","top","bottom","Chart","props","data","dataFilter","xDomain","yDomain","getX","getY0","getY","x","Infinity","y","key","values","Array","isArray","length","reduce","acc","d","x0","Math","min","max","y1","y0","Number","isFinite","domain","nice","getColor","highlightSeries","areas","lines","Object","keys","forEach","datums","filter","point","isArea","Type","color","_getColor","series","onNearestX","bind","onSeriesMouseOver","onSeriesMouseOut","push","concat","highlightValues","theme","style","unit","formatTitle","formatValue","value","crosshairItems","map","i","styleProps","name","displayName","isFirst","isLast","title","crosshairTitle","crosshairLegend","crosshairValue","width","height","formatYTick","formatXTick","xTicks","yTicks","horizontalGridLines","verticalGridLines","onMouseEnter","onMouseMove","onMouseLeave","onClick","chart","crosshair","chartWidth","chartHeight","margin","_getScaleSettings","_renderSeries","_renderCrosshair","oneOfType","string","number","object","func","array","String"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport AutoSizer from '../shared/autosizer';\n\nimport XYPlot from 'react-vis/dist/plot/xy-plot';\nimport AreaSeries from 'react-vis/dist/plot/series/area-series';\nimport LineSeries from 'react-vis/dist/plot/series/line-series';\nimport MarkSeries from 'react-vis/dist/plot/series/mark-series';\nimport HorizontalGridLines from 'react-vis/dist/plot/horizontal-grid-lines';\nimport VerticalGridLines from 'react-vis/dist/plot/vertical-grid-lines';\nimport XAxis from 'react-vis/dist/plot/axis/x-axis';\nimport YAxis from 'react-vis/dist/plot/axis/y-axis';\nimport Crosshair from 'react-vis/dist/plot/crosshair';\n\nimport {scaleLinear} from 'd3-scale';\n\nimport {withTheme} from '../shared/theme';\nimport {\n  ChartContainer,\n  CrosshairItemTitle,\n  CrosshairItemLegend,\n  CrosshairItemValue\n} from './styled-components';\n\nconst noop = () => {};\n\nconst DEFAULT_MARGIN = {left: 32, right: 20, top: 20, bottom: 32};\n\n/**\n * A metric chart draws a chart with optional percentiles and lags\n */\nclass Chart extends PureComponent {\n  static propTypes = {\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    style: PropTypes.object,\n    unit: PropTypes.string,\n\n    data: PropTypes.object,\n    dataFilter: PropTypes.func,\n\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseMove: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onNearestX: PropTypes.func,\n    onSeriesMouseOver: PropTypes.func,\n    onSeriesMouseOut: PropTypes.func,\n\n    getX: PropTypes.func,\n    getY0: PropTypes.func,\n    getY: PropTypes.func,\n    xDomain: PropTypes.array,\n    yDomain: PropTypes.array,\n\n    xTicks: PropTypes.number,\n    yTicks: PropTypes.number,\n    horizontalGridLines: PropTypes.number,\n    verticalGridLines: PropTypes.number,\n\n    highlightSeries: PropTypes.string,\n    highlightValues: PropTypes.object,\n\n    formatYTick: PropTypes.func,\n    formatTitle: PropTypes.func,\n    formatValue: PropTypes.func,\n    formatXTick: PropTypes.func,\n\n    getColor: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n  };\n\n  static defaultProps = {\n    width: '100%',\n    height: 300,\n    style: {},\n    data: {},\n    dataFilter: key => true,\n    unit: '',\n\n    onClick: noop,\n    onMouseEnter: noop,\n    onMouseMove: noop,\n    onMouseLeave: noop,\n    onNearestX: noop,\n    onSeriesMouseOver: noop,\n    onSeriesMouseOut: noop,\n\n    getX: d => d.x,\n    getY0: d => null,\n    getY: d => d.y,\n\n    // Backward compatibility\n    xTicks: 4,\n    yTicks: 4,\n    horizontalGridLines: 4,\n    verticalGridLines: 4,\n\n    formatTitle: value => String(value),\n    formatValue: value => String(value),\n\n    formatXTick: value => String(value),\n    formatYTick: value => String(value),\n\n    getColor: '#000'\n  };\n\n  /* eslint-disable max-depth, complexity */\n  _getScaleSettings() {\n    const {data, dataFilter, xDomain, yDomain, getX, getY0, getY} = this.props;\n\n    if (xDomain && yDomain) {\n      return {xDomain, yDomain};\n    }\n\n    let x = xDomain || [Infinity, -Infinity];\n    let y = yDomain || [0, 0];\n\n    for (const key in data) {\n      if (dataFilter(key)) {\n        const values = data[key];\n        if (Array.isArray(values) && values.length > 0) {\n          x =\n            xDomain ||\n            values.reduce((acc, d) => {\n              const x0 = getX(d);\n              acc[0] = Math.min(acc[0], x0);\n              acc[1] = Math.max(acc[1], x0);\n              return acc;\n            }, x);\n          y =\n            yDomain ||\n            values.reduce((acc, d) => {\n              const y1 = getY(d);\n              const y0 = getY0(d);\n              acc[0] = Math.min(acc[0], y1);\n              acc[1] = Math.max(acc[1], y1);\n              if (Number.isFinite(y0)) {\n                acc[0] = Math.min(acc[0], y0);\n                acc[1] = Math.max(acc[1], y0);\n              }\n              return acc;\n            }, y);\n        }\n      }\n    }\n\n    if (!yDomain) {\n      // Snap the bounds to nice round numbers\n      y = scaleLinear()\n        .domain(y)\n        .nice()\n        .domain();\n    }\n\n    return {xDomain: x, yDomain: y};\n  }\n  /* eslint-enable max-depth, complexity */\n\n  _getColor(key) {\n    const {getColor} = this.props;\n\n    switch (typeof getColor) {\n      case 'object':\n        return getColor[key];\n\n      case 'function':\n        return getColor(key);\n\n      default:\n        return getColor;\n    }\n  }\n\n  // Populate series\n  _renderSeries() {\n    const {data, dataFilter, highlightSeries, getX, getY0, getY, xDomain} = this.props;\n    const areas = [];\n    const lines = [];\n\n    Object.keys(data).forEach(key => {\n      if (!dataFilter(key)) {\n        return;\n      }\n\n      // Temporary patch until vis-gl fixes issue with rendering data outside of domain\n      // https://github.com/uber/react-vis/issues/627\n      const datums = xDomain\n        ? data[key].filter(point => {\n            const x = getX(point);\n            return x >= xDomain[0] && x <= xDomain[1];\n          })\n        : data[key];\n\n      if (!datums.length) {\n        return;\n      }\n\n      const isArea = Number.isFinite(getY0(datums[0]));\n      const Type = isArea ? AreaSeries : LineSeries;\n      const color = this._getColor(key);\n\n      const series = (\n        <Type\n          key={`value-${key}-line`}\n          data={datums}\n          getX={getX}\n          getY={getY}\n          getY0={getY0}\n          color={color}\n          fill={color}\n          strokeWidth={highlightSeries === key ? 4 : 2}\n          onNearestX={this.props.onNearestX.bind(this, key)}\n          onSeriesMouseOver={() => this.props.onSeriesMouseOver(key)}\n          onSeriesMouseOut={() => this.props.onSeriesMouseOut(key)}\n        />\n      );\n\n      if (isArea) {\n        areas.push(series);\n      } else {\n        lines.push(series);\n      }\n    });\n\n    // Render lines on top\n    return areas.concat(lines);\n  }\n\n  _renderCrosshair() {\n    const {highlightValues} = this.props;\n\n    if (!highlightValues) {\n      return null;\n    }\n\n    const {\n      theme,\n      style,\n      unit,\n      dataFilter,\n      formatTitle,\n      formatValue,\n      getX,\n      getY,\n      getY0,\n      xDomain\n    } = this.props;\n    const keys = Object.keys(highlightValues).filter(key => {\n      const value = highlightValues[key];\n      const x = getX(value);\n      return dataFilter(key) && (!xDomain || (x >= xDomain[0] && x <= xDomain[1]));\n    });\n\n    const crosshairItems = keys.map((key, i) => {\n      const value = highlightValues[key];\n      const color = this._getColor(key);\n      const x = getX(value);\n      const y = getY(value);\n      const y0 = getY0(value);\n      const styleProps = {\n        theme,\n        name: key,\n        displayName: formatTitle(key),\n        color,\n        isFirst: i === 0,\n        isLast: i === keys.length - 1\n      };\n\n      return {\n        x,\n        y,\n        title: (\n          <CrosshairItemTitle {...styleProps} userStyle={style.crosshairTitle}>\n            <CrosshairItemLegend {...styleProps} userStyle={style.crosshairLegend} />\n            {styleProps.displayName}\n          </CrosshairItemTitle>\n        ),\n        value: (\n          <CrosshairItemValue {...styleProps} userStyle={style.crosshairValue}>\n            {Number.isFinite(y0) && `${formatValue(y0)}, `}\n            {formatValue(y)}\n            {unit && <span>{unit}</span>}\n          </CrosshairItemValue>\n        ),\n        color\n      };\n    });\n\n    return [\n      <Crosshair\n        key=\"crosshair\"\n        values={crosshairItems}\n        titleFormat={() => null}\n        itemsFormat={values => values}\n      />,\n      <MarkSeries\n        key=\"hovered-values\"\n        data={crosshairItems}\n        stroke=\"#fff\"\n        strokeWidth={2}\n        getFill={d => d.color}\n        fillType=\"literal\"\n      />\n    ];\n  }\n\n  render() {\n    const {\n      theme,\n      width,\n      height,\n      style,\n      formatYTick,\n      formatXTick,\n      xTicks,\n      yTicks,\n      horizontalGridLines,\n      verticalGridLines,\n\n      onMouseEnter,\n      onMouseMove,\n      onMouseLeave,\n      onClick\n    } = this.props;\n\n    return (\n      <ChartContainer\n        theme={theme}\n        userStyle={style.chart}\n        tooltipStyle={style.crosshair}\n        style={{width, height}}\n      >\n        <AutoSizer>\n          {({width: chartWidth, height: chartHeight}) => (\n            <XYPlot\n              width={chartWidth}\n              height={chartHeight}\n              margin={style.margin || DEFAULT_MARGIN}\n              {...this._getScaleSettings()}\n              onClick={onClick}\n              onMouseEnter={onMouseEnter}\n              onMouseMove={onMouseMove}\n              onMouseLeave={onMouseLeave}\n            >\n              {xTicks > 0 && <XAxis title=\"\" tickFormat={formatXTick} tickTotal={xTicks} />}\n\n              {yTicks > 0 && <YAxis title=\"\" tickFormat={formatYTick} tickTotal={yTicks} />}\n\n              {horizontalGridLines > 0 && <HorizontalGridLines tickTotal={horizontalGridLines} />}\n              {verticalGridLines > 0 && <VerticalGridLines tickTotal={verticalGridLines} />}\n\n              {this._renderSeries()}\n              {this._renderCrosshair()}\n            </XYPlot>\n          )}\n        </AutoSizer>\n      </ChartContainer>\n    );\n  }\n}\n\nexport default withTheme(Chart);\n"],"file":"chart.js"}