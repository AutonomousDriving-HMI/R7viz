{"version":3,"sources":["../../../../src/components/hud/meter-widget.js"],"names":["React","PureComponent","PropTypes","evaluateStyle","styled","clamp","BaseWidget","GuageArc","path","props","stroke","theme","controlColorDisabled","strokeCap","userStyle","ZeroMarker","circle","fill","textColorPrimary","CmdMarker","controlColorActive","GuageHand","line","strokeWidth","CmdValue","div","textAlign","flex","padding","spacingTiny","borderRightStyle","borderRightWidth","borderRightColor","color","warning","textColorWarning","fontSize","lineHeight","MsrValue","isOnlyValue","LabelComponent","textColorSecondary","UnitsComponent","Warning","span","position","marginLeft","borderRadius","background","warning400","textColorInvert","getTransform","centerX","centerY","angle","formatValue","value","precision","transformValue","Number","isFinite","digits","Math","max","floor","log10","abs","toFixed","MeterWidget","streams","_renderGauge","cmd","msr","_renderMetric","cmdData","msrData","min","style","arcRadius","r","arcWidth","w","cmdValue","data","variable","msrValue","zero","msrTransform","cmdTransform","zeroTransform","arc","zeroMarker","cmdMarker","hand","label","units","getWarning","cmdWarning","msrWarning","display","render","log","cmdStreamName","streamName","_render","object","isRequired","number","string","func","x","_"],"mappings":"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","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {evaluateStyle} from '@streetscape.gl/monochrome';\nimport styled from '@emotion/styled';\nimport {clamp} from 'math.gl';\n\nimport BaseWidget from './base-widget';\n\nconst GuageArc = styled.path(props => ({\n  stroke: props.theme.controlColorDisabled,\n  strokeCap: 'round',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst ZeroMarker = styled.circle(props => ({\n  fill: props.theme.textColorPrimary,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst CmdMarker = styled.path(props => ({\n  fill: props.theme.controlColorActive,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst GuageHand = styled.line(props => ({\n  stroke: props.theme.textColorPrimary,\n  strokeCap: 'round',\n  strokeWidth: 2,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst CmdValue = styled.div(props => ({\n  textAlign: 'right',\n  flex: 1,\n  padding: props.theme.spacingTiny,\n  borderRightStyle: 'solid',\n  borderRightWidth: 1,\n  borderRightColor: props.theme.controlColorDisabled,\n  color: props.warning ? props.theme.textColorWarning : props.theme.textColorPrimary,\n  fontSize: props.theme.fontSize * 2,\n  lineHeight: '1em',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst MsrValue = styled.div(props => ({\n  textAlign: props.isOnlyValue ? 'center' : 'left',\n  flex: 1,\n  padding: props.theme.spacingTiny,\n  fontSize: props.theme.fontSize * 2,\n  color: props.warning ? props.theme.textColorWarning : props.theme.textColorPrimary,\n  lineHeight: '1em',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst LabelComponent = styled.div(props => ({\n  fontSize: props.theme.fontSize,\n  color: props.theme.textColorSecondary,\n  lineHeight: '1em',\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst UnitsComponent = styled.div(props => ({\n  textAlign: 'center',\n  fontSize: props.theme.fontSize * 0.9,\n  color: props.theme.textColorSecondary,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst Warning = styled.span(props => ({\n  position: 'absolute',\n  marginLeft: props.theme.spacingTiny,\n  fontSize: props.theme.fontSize * 0.9,\n  lineHeight: '1em',\n  padding: props.theme.spacingTiny,\n  borderRadius: 2,\n  background: props.theme.warning400,\n  color: props.theme.textColorInvert,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nfunction getTransform(centerX, centerY, angle) {\n  return `translate(${centerX} ${centerY}) rotate(${angle}) translate(${-centerX} ${-centerY})`;\n}\n\nfunction formatValue(value, precision = 3, transformValue) {\n  if (!Number.isFinite(value)) {\n    return '';\n  }\n  value = transformValue(value);\n  const digits = value ? Math.max(1, Math.floor(Math.log10(Math.abs(value)) + 1)) : 1;\n\n  return `${value.toFixed(Math.max(0, precision - digits))}`;\n}\n\nexport default class MeterWidget extends PureComponent {\n  static propTypes = {\n    log: PropTypes.object.isRequired,\n    style: PropTypes.object,\n    precision: PropTypes.number,\n    units: PropTypes.string,\n    cmdStreamName: PropTypes.string,\n    streamName: PropTypes.string.isRequired,\n    label: PropTypes.string,\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    transformValue: PropTypes.func,\n    getWarning: PropTypes.func\n  };\n\n  static defaultProps = {\n    precision: 3,\n    style: {},\n    transformValue: x => x,\n    getWarning: _ => null\n  };\n\n  _renderGauge(cmdData, msrData, theme) {\n    const {min, max, transformValue, style} = this.props;\n    const {arcRadius: r = 50, arcWidth: w = 8} = style;\n    const padding = 8;\n\n    if (r <= w / 2) {\n      return null;\n    }\n\n    const cmdValue = transformValue((cmdData && cmdData.data && cmdData.data.variable) || 0);\n    const msrValue = transformValue((msrData.data && msrData.data.variable) || 0);\n\n    const msr = clamp((msrValue - min) / (max - min), 0, 1);\n    const cmd = clamp((cmdValue - min) / (max - min), 0, 1);\n    const zero = clamp((0 - min) / (max - min), 0, 1);\n\n    const msrTransform = getTransform(r + padding, r + padding, msr * 180 - 90);\n    const cmdTransform = getTransform(r + padding, r + padding, cmd * 180 - 90);\n    const zeroTransform = getTransform(r + padding, r + padding, zero * 180 - 90);\n\n    return (\n      <svg width={(r + padding) * 2} height={r + padding * 2}>\n        <GuageArc\n          d={`M ${padding + w / 2} ${r + padding} a ${r - w / 2} ${r - w / 2} 1 1 1 ${r * 2 - w} 0`}\n          fill=\"none\"\n          strokeWidth={w}\n          theme={theme}\n          userStyle={style.arc}\n        />\n\n        <g transform={zeroTransform}>\n          <ZeroMarker\n            cx={r + padding}\n            cy={padding - 4}\n            r={2}\n            theme={theme}\n            userStyle={style.zeroMarker}\n          />\n        </g>\n        {cmdData && (\n          <g transform={cmdTransform}>\n            <CmdMarker\n              transform={`translate(${r + padding} ${padding})`}\n              d={`M0,${w} L${-w / 2},0 L${w / 2},0z`}\n              theme={theme}\n              userStyle={style.cmdMarker}\n            />\n          </g>\n        )}\n        {msrData && (\n          <g transform={msrTransform}>\n            <GuageHand\n              x1={r + padding}\n              y1={r + padding}\n              x2={r + padding}\n              y2={padding + w + 4}\n              theme={theme}\n              userStyle={style.hand}\n            />\n          </g>\n        )}\n      </svg>\n    );\n  }\n\n  _renderMetric(cmdData, msrData, theme) {\n    const {label, units = msrData.units, transformValue, precision, getWarning, style} = this.props;\n\n    const cmdValue = cmdData && cmdData.data && cmdData.data.variable;\n    const msrValue = msrData.data && msrData.data.variable;\n    const cmdWarning = getWarning(cmdValue);\n    const msrWarning = getWarning(msrValue);\n\n    return (\n      <div>\n        <div style={{display: 'flex'}}>\n          {cmdData && (\n            <CmdValue theme={theme} warning={cmdWarning} userStyle={style.cmdValue}>\n              <LabelComponent theme={theme} warning={cmdWarning} userStyle={style.label}>\n                Cmd.\n              </LabelComponent>\n              <div>{formatValue(cmdValue, precision, transformValue) || '-'}</div>\n            </CmdValue>\n          )}\n          <MsrValue\n            theme={theme}\n            warning={msrWarning}\n            isOnlyValue={!cmdData}\n            userStyle={style.msrValue}\n          >\n            <LabelComponent theme={theme} warning={msrWarning} userStyle={style.label}>\n              {label}\n            </LabelComponent>\n            <div>{formatValue(msrValue, precision, transformValue) || '-'}</div>\n          </MsrValue>\n        </div>\n        <UnitsComponent theme={theme} userStyle={style.units}>\n          {units}\n          {(cmdWarning || msrWarning) && (\n            <Warning theme={theme} userStyle={style.warning}>\n              {cmdWarning || msrWarning}\n            </Warning>\n          )}\n        </UnitsComponent>\n      </div>\n    );\n  }\n\n  _render = ({theme, streams}) => (\n    <div>\n      {this._renderGauge(streams.cmd, streams.msr, theme)}\n      {this._renderMetric(streams.cmd, streams.msr, theme)}\n    </div>\n  );\n\n  render() {\n    const {log, style, cmdStreamName, streamName} = this.props;\n\n    return (\n      <BaseWidget log={log} style={style} streamNames={{cmd: cmdStreamName, msr: streamName}}>\n        {this._render}\n      </BaseWidget>\n    );\n  }\n}\n"],"file":"meter-widget.js"}