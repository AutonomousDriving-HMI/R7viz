{"version":3,"sources":["../../../../src/components/playback-control/dual-playback-control.js"],"names":["React","PureComponent","PropTypes","PlaybackControl","Slider","withTheme","evaluateStyle","styled","LookAheadContainer","div","props","display","alignItems","width","flexGrow","userStyle","LookAheadTimestamp","span","marginLeft","theme","spacingNormal","marginRight","lookAheadMarkerStyle","position","boxSizing","borderStyle","marginTop","borderWidth","borderLeftColor","borderRightColor","borderTopColor","borderBottomStyle","transitionProperty","transitionDuration","isPlaying","DualPlaybackControl","_renderLookAheadSlider","style","lookAhead","formatLookAhead","maxLookAhead","step","lookAheadTimestamp","lookAheadSlider","onLookAheadChange","render","userMarkers","markers","children","currentTime","endTime","lookAheadTime","Math","min","concat","time","lookAheadMarker","propTypes","number","func","defaultProps","formatTick","formatTimestamp","x","formatTimeCode","ThemedDualPlaybackControl"],"mappings":"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","sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {PlaybackControl, Slider, withTheme, evaluateStyle} from '@streetscape.gl/monochrome';\n\nimport styled from '@emotion/styled';\n\nconst LookAheadContainer = styled.div(props => ({\n  display: 'flex',\n  alignItems: 'center',\n  width: 200,\n  '>div': {\n    flexGrow: 1\n  },\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst LookAheadTimestamp = styled.span(props => ({\n  marginLeft: props.theme.spacingNormal,\n  marginRight: props.theme.spacingNormal,\n  ...evaluateStyle(props.userStyle, props)\n}));\n\nconst lookAheadMarkerStyle = props => ({\n  position: 'absolute',\n  boxSizing: 'content-box',\n  borderStyle: 'solid',\n  marginTop: 6,\n  marginLeft: -6,\n  borderWidth: 6,\n  borderLeftColor: 'transparent',\n  borderRightColor: 'transparent',\n  borderTopColor: '#888',\n  borderBottomStyle: 'none',\n\n  transitionProperty: 'left',\n  transitionDuration: props.isPlaying ? '0s' : props.theme.transitionDuration,\n\n  ...evaluateStyle(props.userStyle, props)\n});\n\nclass DualPlaybackControl extends PureComponent {\n  static propTypes = {\n    ...PlaybackControl.propTypes,\n    lookAhead: PropTypes.number,\n    maxLookAhead: PropTypes.number,\n    formatLookAhead: PropTypes.func,\n    onLookAheadChange: PropTypes.func\n  };\n\n  static defaultProps = {\n    ...PlaybackControl.defaultProps,\n    step: 0,\n    markers: [],\n    lookAhead: 0,\n    maxLookAhead: 10,\n    formatTick: null,\n    formatTimestamp: null,\n    formatLookAhead: x => PlaybackControl.formatTimeCode(x, '{ss}.{S}'),\n    onLookAheadChange: () => {}\n  };\n\n  _renderLookAheadSlider() {\n    const {theme, style, isPlaying, lookAhead, formatLookAhead, maxLookAhead, step} = this.props;\n\n    return (\n      <LookAheadContainer theme={theme} isPlaying={isPlaying} userStyle={style.lookAhead}>\n        <LookAheadTimestamp\n          theme={theme}\n          isPlaying={isPlaying}\n          userStyle={style.lookAheadTimestamp}\n        >\n          Look ahead: {formatLookAhead(lookAhead)}\n        </LookAheadTimestamp>\n        <Slider\n          style={style.lookAheadSlider}\n          value={lookAhead}\n          min={0}\n          max={maxLookAhead}\n          step={step}\n          size={16}\n          onChange={this.props.onLookAheadChange}\n        />\n      </LookAheadContainer>\n    );\n  }\n\n  render() {\n    const {\n      theme,\n      isPlaying,\n      markers: userMarkers,\n      style,\n      children,\n      currentTime,\n      lookAhead,\n      endTime\n    } = this.props;\n    const lookAheadTime = Math.min(endTime, currentTime + lookAhead);\n\n    const markers = userMarkers.concat({\n      time: lookAheadTime,\n      style: lookAheadMarkerStyle({theme, isPlaying, userStyle: style.lookAheadMarker})\n    });\n\n    return (\n      <PlaybackControl {...this.props} markers={markers}>\n        {children}\n        <div style={{flexGrow: 1}} />\n        {this._renderLookAheadSlider()}\n      </PlaybackControl>\n    );\n  }\n}\n\nconst ThemedDualPlaybackControl = withTheme(DualPlaybackControl);\nThemedDualPlaybackControl.formatTimeCode = PlaybackControl.formatTimeCode;\n\nexport default ThemedDualPlaybackControl;\n"],"file":"dual-playback-control.js"}